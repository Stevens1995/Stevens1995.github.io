<!DOCTYPE html><html class="theme-next pisces" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="//fonts.loli.net/css?family=Sigmar One:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=0.0.42" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/DIYgod-180x180.jpg?v=0.0.42"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=0.0.42"><link rel="mask-icon" href="/images/DIYgod.jpg?v=0.0.42" color="#222"><meta name="keywords" content="翻译,新鲜货,"><link rel="alternate" href="/atom.xml" title="Hey there~" type="application/atom+xml"><meta name="description" content="本文是一篇翻译过来的文章，原文地址：https://blog.logrocket.com/truly-reactive-programming-with-svelte-3-0-321b49b75969这个标题有点戏剧性，但是话又说回来，Svelte背后的想法正是如此。如果你还不知道Svelte是什么，那赶紧过来瞅瞅 — 你将会看到一场革命，并且Svelte将会取得最后的胜利（并不是在对Svelte"><meta name="keywords" content="翻译,新鲜货"><meta property="og:type" content="article"><meta property="og:title" content="Truly reactive programming with Svelte3.0"><meta property="og:url" content="https://stevens1995.github.io/Truly-reactive-programming-with-Svelte3-0/index.html"><meta property="og:site_name" content="Hey there~"><meta property="og:description" content="本文是一篇翻译过来的文章，原文地址：https://blog.logrocket.com/truly-reactive-programming-with-svelte-3-0-321b49b75969这个标题有点戏剧性，但是话又说回来，Svelte背后的想法正是如此。如果你还不知道Svelte是什么，那赶紧过来瞅瞅 — 你将会看到一场革命，并且Svelte将会取得最后的胜利（并不是在对Svelte"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1200/1*2hDcp8VSEJk74trofc3JtQ.jpeg"><meta property="og:image" content="http://pryb8y3zu.bkt.clouddn.com/react-is-not-fully-reactive.png"><meta property="og:image" content="https://i1.wp.com/cdn-images-1.medium.com/max/1600/1*y8KNWov5UwulVryUPq6srw@2x.png?ssl=1"><meta property="og:image" content="https://i2.wp.com/cdn-images-1.medium.com/max/1600/1*129rCsjvqwpczQ5Ld_U44A@2x.png?ssl=1"><meta property="og:updated_time" content="2019-06-10T13:45:30.894Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Truly reactive programming with Svelte3.0"><meta name="twitter:description" content="本文是一篇翻译过来的文章，原文地址：https://blog.logrocket.com/truly-reactive-programming-with-svelte-3-0-321b49b75969这个标题有点戏剧性，但是话又说回来，Svelte背后的想法正是如此。如果你还不知道Svelte是什么，那赶紧过来瞅瞅 — 你将会看到一场革命，并且Svelte将会取得最后的胜利（并不是在对Svelte"><meta name="twitter:image" content="https://cdn-images-1.medium.com/max/1200/1*2hDcp8VSEJk74trofc3JtQ.jpeg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"0.0.42",sidebar:{position:"right",display:"always",offset:52,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,tabs:!0,motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},since:"2/9/2014 11:30:00",onlineAPI:"wss://api.diygod.me/online/",site:{title:"Hey there~",subtitle:"",author:"动力小车"},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},leancloud:{enable:!0,appID:"Ti5mwFDXXbpWqeWdaydLNfOS-gzGzoHsz",appKey:"rXpryRyVs5jlk2LAGGI1bfEd"},favicon:{visibilitychange:!0,narmal:"/images/favicon.ico",hidden:"/images/failure.ico",show_text:"(/≧▽≦/)咦！又好了！",hide_text:"(●—●)喔哟，崩溃啦！"}}</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/disqusjs@1.2.2/dist/disqus.js"></script><link rel="canonical" href="https://stevens1995.github.io/Truly-reactive-programming-with-Svelte3-0/"><title>Truly reactive programming with Svelte3.0 | Hey there~</title><script>!function(e,a,t,n,c,g,s){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,g=a.createElement("script"),s=a.getElementsByTagName("script")[0],g.async=1,g.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(g,s)}(window,document),ga("create","UA-48084758-7","auto"),ga("send","pageview")</script></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans" class="theme-darling"><div class="container sidebar-position-right page-post-detail"><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-抓到我"><a href="javascript:;" rel="section"><i class="menu-item-icon fa fa-fw fa-sign-language"></i><br>抓到我</a><ul class="submenu submenu-抓到我"><li class="submenu-item submenu-item-github"><a href="https://github.com/Stevens1995" rel="section" target="_blank">GitHub</a></li><li class="submenu-item submenu-item-twitter"><a href="https://twitter.com/hsping1995" rel="section" target="_blank">Twitter</a></li></ul></li><li class="menu-item menu-item-实验室"><a href="javascript:;" rel="section"><i class="menu-item-icon fa fa-fw fa-flask"></i><br>实验室</a></li><li class="menu-item menu-item-归档"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item search"><form class="search-form"><input name="keyword" type="text" class="search-input" placeholder="站内搜索"> <button type="submit" class="search-submit"><i class="fa fa-search"></i></button></form></li></ul></nav><div class="site-brand-wrapper" style="background-image:url(/images/header-mai.jpg)"><div class="site-meta"><div class="custom-logo-site-title"><div class="brand"><span class="logo-line-before"><i></i></span><div class="site-title"><div id="animate" class="animate"><span>H</span><span>e</span><span>y</span><span> </span><span>t</span><span>h</span><span>e</span><span>r</span><span>e</span><span>~</span></div><div id="guide" class="guide"><span>H</span><span>e</span><span>y</span><span> </span><span>t</span><span>h</span><span>e</span><span>r</span><span>e</span><span>~</span></div></div><span class="logo-line-after"><i></i></span></div></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><div class="site-master" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-master-avatar" itemprop="image" src="/images/DIYgod.jpg" alt="动力小车"><h2 class="site-master-description" itemprop="description"><span>写代码是热爱，</span><span>写到世界充满爱！</span></h2></div></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-date"><div class="post-month">05月</div><div class="post-day">30</div></div><div class="post-badge"><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/翻译/" itemprop="url" rel="index"><span itemprop="name">翻译</span></a></span></div><div class="post-block"><link itemprop="mainEntityOfPage" href="https://stevens1995.github.io/Truly-reactive-programming-with-Svelte3-0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="动力小车"><meta itemprop="description" content=""><meta itemprop="image" content="/images/DIYgod.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hey there~"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Truly reactive programming with Svelte3.0</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-30T15:18:47+08:00">2019-05-30</time> </span><span class="post-wordcount"><span class="post-meta-divider">•</span> <span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计</span> <span title="字数统计">3215</span> </span><span id="/Truly-reactive-programming-with-Svelte3-0/" class="leancloud_visitors" data-flag-title="Truly reactive programming with Svelte3.0"><span class="post-meta-divider">•</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数</span> <span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>本文是一篇翻译过来的文章，原文地址：<a href="hhttps://blog.logrocket.com/truly-reactive-programming-with-svelte-3-0-321b49b75969" target="_blank" rel="noopener">https://blog.logrocket.com/truly-reactive-programming-with-svelte-3-0-321b49b75969</a></p></blockquote><p><img src="https://cdn-images-1.medium.com/max/1200/1*2hDcp8VSEJk74trofc3JtQ.jpeg" alt="Svelte"></p><p>这个标题有点戏剧性，但是话又说回来，Svelte背后的想法正是如此。如果你还不知道Svelte是什么，那赶紧过来瞅瞅 — 你将会看到一场革命，并且Svelte将会取得最后的胜利（并不是在对Svelte团队施加压力哈😅）。</p><a id="more"></a><p>请注意本文并不是学习和使用Svelte的教程。Svelte团队已经提供了一份很棒的<a href="https://svelte.dev/tutorial/basics" target="_blank" rel="noopener">一步一步的互动式</a>教程，以便帮助你走进反应式编程的世界。</p><p><strong>免责声明</strong>：我不是编程界的摇滚明星，我不可能知道所有事情。我只是对每天发生的新鲜事情感到好奇，并且在我可以的时候分享- 于是就有了这篇文章。请带着一些怀疑的想法来看待这里我所说的事情，并且，如果我说了一些愚蠢的话，麻烦及时让我知道。</p><p>好嘞！让我们开始吧！💥</p><h2 id="首先-关于react">首先，关于React</h2><p>在我开始讨论为什么Svelte如此强大之前，我们先来看看Dan的一条推文，一段时间后我们再来看看其中表达的意思：</p><p><img src="http://pryb8y3zu.bkt.clouddn.com/react-is-not-fully-reactive.png" alt="react is not fully reactive"></p><p><strong>另一份免责声明</strong>：这篇文章也不是以任何方式批评和攻击React。我只是简单地决定用React作为一个学习案例，因为此文的大部分读者应该都用过一点React。React是跟Svelte对比的一个很好地案例。</p><p>Dan到底想表达什么，这对我们现在的编程方式有何影响呢？在回答这个问题前，让我简单地向你介绍下React背后的工作原理。</p><p>当你渲染一个React应用时，React保存了一份DOM的拷贝，称作<a href="https://reactjs.org/docs/faq-internals.html" target="_blank" rel="noopener">虚拟DOM</a>。虚拟DOM充当你的React代码和浏览器渲染DOM之间的中间人。</p><p>每当你的数据改变时（比如当你调用<code>this.setState</code>，<code>useState</code>），React做了一点工作来决定如何重绘屏幕上的UI。数据更新后，React会对比虚拟DOM和真实DOM，并且只更新两者间不同的地方。这样就避免了每次数据改变时都要重新渲染整个DOM。</p><p>现在，一切都变得很迅速，因为更新虚拟DOM比更新真实DOM所耗费的性能小很多，React只更新了真实DOM确实需要更新的部分。<a href="https://medium.com/@gethylgeorge/how-virtual-dom-and-diffing-works-in-react-6fc805f9f84e" target="_blank" rel="noopener">这篇</a>文章很好地讲述了整个过程。</p><p>但是！但是啊，聪明的你可能已经注意到了一些事情。那就是，如果你不告诉React你的数据发生了改变（比如，通过调用<code>this.setState</code>或者钩子函数），你的虚拟DOM就不会发生改变，React就不再react了。（ba dum tss! 🤓）（这句翻译不来…有点像 dumb ass…）</p><p>这就是Dan为什么说React不是完全reactive的原因。React依赖用户来跟踪应用中的数据，通过用来告诉自己数据发生了改变，但这对用户来说通常是额外的工作。</p><h2 id="ok-让我们来看看svelte">OK，让我们来看看Svelte</h2><p>Svelte提供一种全新的方式来搭建超级快速，高效，真正响应式行为的UI。没有虚拟DOM，并且代码行数比所有其他你用过框架或者包更少。</p><p>这听起来很棒，但是它与众多的JavaScript框架有什么不同呢？Let me show you 😏</p><h3 id="真正的反应式">真正的反应式</h3><p>Svelte不是一个包或者框架。Svelte是一个编译器，它接受原生的JavaScript代码，输出的Javascript也是直接与DOM交互，而不需要任何其他东西充当中介。</p><p>等一下？什么？一个编译器？（作者戏真多…）。 是的----- 一个编译器。这是一个非常棒的想法，我不明白为什么直到现在Svelte还不是很惹人注意，现在，让我来告诉你为什么Svelte是那么地酷炫。</p><p>以下是<a href="https://www.youtube.com/watch?v=AdNJ3fydeao" target="_blank" rel="noopener">Rich Harris在YGLF 2019年会议上的讲话</a>：</p><blockquote><p>Svelte 3.0将反应性从组件API移入语言中。<br>(Svelte 3.0 moves reactivity out of the component API and into the language.)</p></blockquote><p>这句话是什么意思呢？我们已经知道了React（以及很多其他的前端框架）需要你调用特定的API来告诉其数据发生了改变（通过调用<code>this.setState</code>或者<code>useState</code>）才能更新它的虚拟DOM。在React中，需要调用<code>this.setState</code>意味着你的应用的反应性其实是绑定在特定的API上，没有这些API，数据的改变并不会被注意到。</p><p>而Svelte通过另一种方式来实现反应性。</p><p>Svelte从<a href="">Observable</a>运行代码的方式中获取到了灵感，以拓扑代替从上至下的方式来运行代码。我们通过下面这段代码来看看什么是通过拓扑顺序来执行代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">const</span> square =&gt; <span class="function"><span class="params">number</span> =&gt;</span> number * number;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">const</span> secondNumber = square(firstNumber);</span><br><span class="line">   <span class="keyword">const</span> firstNumber = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line">   <span class="built_in">console</span>.log(secondNumber);</span><br><span class="line">   &#125;)();</span><br></pre></td></tr></table></figure>
<p>如果你从上至下运行这段代码的话，解释到在第4行的时候，程序会报错。因为<code>secondNunmber</code>依赖于<code>firstNumber</code>，但<code>firstNumber</code>还没有被定义。但是如果程序以拓扑的方式来执行的话，程序不会报任何错误。为什么呢？以为编译器不会自上而下执行代码，而是会查看所有的变量从而生成一个依赖图（即谁被需要谁先被执行）</p>
<p>在上述的例子中，要理解编译器如果以拓扑的方式编译代码很简单：</p>
<ol>
<li><code>square</code>变量依赖其他变量吗？<br>
-没有，初始化<code>square</code></li>
<li><code>secondNumber</code>依赖于其他变量吗？<br>
-<code>secondNumber</code>依赖于<code>square</code>和<code>firstNumber</code>,<code>square</code>已经被初始化，但是<code>firstNumber</code>还没有被初始化，初始化<code>firstNumber</code></li>
<li>OK，<code>firstNumber</code>已经被初始化，现在可以用<code>firstNumber</code>和<code>square</code>来初始化<code>secondNumber</code><br>
-还有其他的变量需要初始化吗？没有-执行代码</li>
</ol>
<p>乍一看，这段代码似乎依然是从上到下执行的，但是仔细看的话，你会发现实际上代码执行时会有一些跳转。</p>
<p>当代码执行到第四行时，编译器发现<code>firstNumber</code>并没有被定义，于是编译器暂停解释该语句，并且在你的代码中寻找该变量的定义。当找到<code>firstNumber</code>在第五行被定义后，第五行会先于第四行执行，当第五行执行完毕后，再返回执行第四行。</p>
<p><em><strong>TL;DR：如果语句A依赖于语句B，不管语句声明的顺序如何，B将先于A执行</strong></em></p>
<p>Svelte是如何应用上述的原理以实现真正的反应式呢？在Svelte中，你可以用一个标识符来表示一个语句，像这样：<code>$: foo = bar</code>。这样做之后，语句<code>foo = bar</code>就有了一个表示<code>$</code>（上述语句在严格模式下会报错）</p>
<p>当Svelte看到任何有<code>$</code>前缀的语句时，编译器就知道左边的变量由右边的变量导出。于是，现在我们有了将一个变量绑定在另一个变量的方法。</p>
<p>Reactivity!(反应式!)这意味着现在我们用JavaScript的原生API来实现真正的响应式，而无需再摆弄一些三方API，比如<code>this.setState</code>。</p>
<p>下面的代码是这样写的实际效果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vanilla js</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> bar = foo + <span class="number">10</span>; <span class="comment">// bar is now 20</span></span><br><span class="line">foo = bar <span class="comment">// bar is still 20 (no reactivity)</span></span><br><span class="line">bar = foo + <span class="number">5</span> <span class="comment">// now bar becomes 25</span></span><br><span class="line"><span class="comment">// svelte js</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="number">10</span>;</span><br><span class="line">$: bar = foo + <span class="number">10</span>; <span class="comment">// bar is now 20</span></span><br><span class="line">foo = <span class="number">15</span> <span class="comment">// bar is now 25 because it is bound to the value of foo</span></span><br></pre></td></tr></table></figure>
<p>在上述的Svelte代码中，我们并不需要将<code>foo</code>的新值重新赋值给<code>bar</code>，代码会帮我们自动处理。当你把<code>foo</code>的值更改为15时，<code>bar</code>会自动更新为25。</p>
<p>上述的Svelte代码经过编译后，大概便变成这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">... omitted <span class="keyword">for</span> brevity ...</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instance</span>(<span class="params">$$self, $$props, $$invalidate</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> foo = <span class="number">10</span>; <span class="comment">// bar is now 20</span></span><br><span class="line">   $$invalidate(<span class="string">'foo'</span>, foo = <span class="number">15</span>) <span class="comment">// bar is now 25 because it is bound to the value of foo</span></span><br><span class="line">   <span class="keyword">let</span> bar;</span><br><span class="line">   $$self.$$.update = <span class="function">(<span class="params">$$dirty = &#123; foo: <span class="number">1</span> &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">if</span> ($$dirty.foo) &#123; $$invalidate(<span class="string">'bar'</span>, bar = foo + <span class="number">19</span>); &#125;</span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="keyword">return</span> &#123; bar &#125;;</span><br><span class="line"> &#125;</span><br><span class="line">... omitted <span class="keyword">for</span> brevity ...</span><br></pre></td></tr></table></figure>
<p><strong>花点时间认真看看上面的代码，真的，认真看下。</strong></p>
<p>你看到<code>foo</code>是如何更新的吗？即使是在<code>bar</code>没有被定义之前。（我暂时没看懂…）这是因为Svelte的编译器以拓扑的顺序来执行代码，而不是自上而下。</p>
<p>Svelte自动对数据的更新做出改变，而不需要用户关系改变的内容和时间，这一切都是自动进行的。用户可以专注于代码逻辑，让Svelte根据应用状态的改变来调节UI。</p>
<h3 id="简洁">简洁</h3>
<p>记得我说过Svelte可以用更少的代码来做到相同的工作吗？我是认真的！看看下面这个组件分别用Svelte和React实现的版本：</p>
<p><img src="https://i1.wp.com/cdn-images-1.medium.com/max/1600/1*y8KNWov5UwulVryUPq6srw@2x.png?ssl=1" alt="Svelte &amp;amp; React"></p>
<p><strong><strong>17行代码 vs 29行代码</strong></strong></p>
<p>上述两个应用实现的功能几乎完全一样，但是你可以看到在<code>React.js</code>中，我们不得不编写更多地代码 ---- <code>Angular</code>里面更过分。</p>
<p><img src="https://i2.wp.com/cdn-images-1.medium.com/max/1600/1*129rCsjvqwpczQ5Ld_U44A@2x.png?ssl=1" alt="Svelte &amp;amp; React"></p>
<p>Svelte简洁的代码除了看起来更方便之外，同时也更利于逻辑的判断和推理，因为代码中没有其他冗余的部分。我们不需要事件处理程序来更新input输入–简单的绑定就可以了。</p>
<p>假如你是一个刚刚入门的web开发者，哪一种方式学习起来更加简单？左边？还是右边？</p>
<p>或许你认为仅仅是少一点代码看起来很微不足道，但是当你所负责的项目变得越来越大，越来越复杂时，简洁的代码就变得很重要。我个人发现，有时候需要花费数个小时才能理解一个同事写的<code>React</code>组件。</p>
<h3 id="性能">性能</h3>
<p>OK，我们已经见识到了Svelte如何实现真正的反应式，并且让我们的代码更加简短和简洁。那么性能呢？如果用Svelte来编写完整的应用，用户体验如何？</p>
<p>一个让<code>React</code>如此强大的原因是<code>React</code>使用虚拟DOM来更新UI中很少的一部分，避免了每次数据改变时都重绘整个DOM。但是，这种方法有一个缺点是，当一个<code>React</code>组件改变时，<code>React</code>会重新渲染所有的子组件，不管子组件是否有重新渲染的必要。这就是为什么<code>React</code>提供了<code>shouldComponentUpdate</code>，<code>useMemo</code>，<code>React.PureComponent</code>等API。只要使用虚拟DOM来更新UI，这个问题就会一直存在。</p>
<p>Svelte没有使用虚拟DOM，那么她是如何根据应用的状态来同步更新UI的呢？让我再次引用Rich Harris的精彩YGLF演讲：</p>
<blockquote>
<p>Frameworks are not tools for organizing your code. They are tools for organizing your mind.<br>
框架不是组织代码的工具，框架是用来组织你的思想的。</p>
</blockquote>
<p>正是上面的引用给Rich带来了框架能够在构建阶段运行的灵感，这样代码在运行时就不需要其他中介。这个灵感也导致了Svelte是编译器，而不是框架。</p>
<p>这个简单的想法正是Svelte如此快速的原因。Svelte将你的代码编译为更底层的高效的代码，直接与DOM交互。</p>
<p>上面这些都很棒，但是Svelte是如何避免数据改变时重绘整个DOM呢？Svelte与React的差异在于如何感知数据的改变。我们已经知道，<code>React</code>依赖于用户调用API来感知数据改变，而<code>Svelte</code>只需要简单的使用<code>=</code>就可以了。</p>
<p>如果一个变量—我们假设<code>foo</code>—通过<code>=</code>进行了更新，Svelte只会更新其他依赖于<code>foo</code>的变量。这允许Svelte只更新部分从<code>foo</code>变量中获取值的DOM。</p>
<p>关于其中的细节，可以看<a href="https://www.youtube.com/watch?v=AdNJ3fydeao" target="_blank" rel="noopener">Rich的解释</a></p>
<h2 id="最后一点想法">最后一点想法</h2>
<p>Svelte3.0是一段时间内发生的关于软件开发的最好的事情。有些人可以说这有些夸大其词，但是我不这么认为。Svelte背后的理念使得我们在向浏览器中引用更少的模板的同时，做更多的事情。应用也会因此变得更加高性能，更加轻便，同时代码也变得更加优雅和易读。那现在是不是Svelte可以马上取代React，Angular，Vue或者其他前端框架吗？</p>
<p>到目前为止，答案是否定的。相比于这些框架，Svelte相对来说还不是很成熟。它需要时间去成长，变得更加成熟，甚至解决一些目前我们还没有发现的问题。</p>
<p>就像<code>React</code>横空出世改变软件开发模式一样，Svelte也有可能改变我们关于框架的看法，在我们创建新的项目时提供无限可能。</p>
<p>最后，<strong>Happy Coding!</strong></p>
      
    </div>
    
    
    

    

    
      <div class="post-share">分享到：</div>
    

    
      <div>
        <div style="padding:10px 0;margin:20px auto;width:90%;text-align:center">
  <div></div>
  <button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'>
    <span>赞赏</span>
  </button>
  <div id="QR" style="display:none">

    
      <div id="wechat" style="display:inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="动力小车 微信扫一扫，向我赞赏">
        <p>微信扫一扫，向我赞赏</p>
      </div>
    

    
      <div id="alipay" style="display:inline-block">
        <img id="alipay_qr" src="/images/alipay.png" alt="动力小车 支付宝扫一扫，向我赞赏">
        <p>支付宝扫一扫，向我赞赏</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/翻译/" rel="tag"># 翻译</a>
          
            <a href="/tags/新鲜货/" rel="tag"># 新鲜货</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/JavaScript-Clean-Code-Best-Practices/" rel="next" title="JavaScript Clean Code - Best Practices">
                <i class="fa fa-chevron-left"></i> JavaScript Clean Code - Best Practices
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  





  




	





  





  













        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/card2.gif" alt="动力小车">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description">你能抓到我么？</p>
          </div>

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/Stevens1995" target="_blank" title="GitHub" data-balloon="GitHub" data-balloon-pos="up">
                    
                       <i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/hsping1995" target="_blank" title="Twitter" data-balloon="Twitter" data-balloon-pos="up">
                    
                       <i class="fa fa-fw fa-twitter"></i></a>
                </span>
              
            
          </div>

          
            <div class="feed-link motion-element">
              
              <a class="feed-rss" href="/atom.xml" rel="alternate" target="_blank">
                <i class="fa fa-rss"></i>
                <span>RSS 订阅</span>
              </a>
            </div>
          

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            
            

          </nav>

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" target="_blank">
                <img src="/images/cc-by-nc-sa.png" alt="Creative Commons">
              </a>
            </div>
          

          
          

          

        </div>
      </section>

      
      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#首先-关于react"><span class="nav-number">1.</span> <span class="nav-text">首先，关于React</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ok-让我们来看看svelte"><span class="nav-number">2.</span> <span class="nav-text">OK，让我们来看看Svelte</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#真正的反应式"><span class="nav-number">2.1.</span> <span class="nav-text">真正的反应式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#简洁"><span class="nav-number">2.2.</span> <span class="nav-text">简洁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#性能"><span class="nav-number">2.3.</span> <span class="nav-text">性能</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#最后一点想法"><span class="nav-number">3.</span> <span class="nav-text">最后一点想法</span></a></li></ol></div>
            

          </div>
        </section>
      
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-image"></div>
      <div class="footer-inner">
        <p>博客已萌萌哒运行<span id="since"></span><span class="my-face">(●'◡'●)ﾉ♥</span></p>
<p>托管于<a href="https://github.com/" target="_blank" rel="nofollow"> GitHub</a>. <a href="https://www.upyun.com/" target="_blank" rel="nofollow">又拍云</a> 提供 CDN 服务. <a href="http://www.google.com/analytics/" target="_blank" rel="nofollow">Google Analytics </a>提供网站统计服务. <a href="https://www.cloudxns.net/" target="_blank" rel="nofollow">CloudXNS </a>提供 DNS 解析服务.</p>

<p>© <span itemprop="copyrightYear">2019</span> Hey there~.
    由 <a href="https://hexo.io/" target="_blank" class="external" rel="nofollow">Hexo</a> 强力驱动.
    Theme By <a href="https://github.com/DIYgod/hexo-theme-sagiri" target="_blank" class="external" rel="nofollow">Sagiri</a> v0.0.42.
    <a href="/sitemap.xml" target="_blank">站点地图</a>.
    鲁ICP备16000184号.
</p>
<p>Made with <i class="fa fa-heart throb" style="color:#d43f57"></i> by <span class="author" itemprop="copyrightHolder">动力小车</span>. </p>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    <canvas id="evanyou"></canvas>
    <div id="aplayer-fixed"></div>

    

  </div>

  <script type="text/javascript" src="/js/sagiri.min.js?v=0.0.42"></script>

  





  

  
  

  

  

  


  

  <script>var serviceWorkerUri="/sw.js";"serviceWorker"in navigator?navigator.serviceWorker.register(serviceWorkerUri).then(function(){navigator.serviceWorker.controller?console.log("Assets cached by the controlling service worker."):console.log("Please reload this page to allow the service worker to handle network operations.")}).catch(function(e){console.log("ERROR: "+e)}):console.log("Service workers are not supported in the current browser.")</script></body></html>